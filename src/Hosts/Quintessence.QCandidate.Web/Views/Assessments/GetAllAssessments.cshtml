@using Microsoft.AspNetCore.Mvc.Localization
@model IEnumerable<Quintessence.QCandidate.Models.Assessments.AllAssessments>

@inject IViewLocalizer Localizer

@{

    var language = User.Claims.SingleOrDefault(c => c.Type == "extension_Language").Value.ToLower();
    System.Threading.Thread.CurrentThread.CurrentUICulture = System.Globalization.CultureInfo.GetCultureInfo(language);
    System.Threading.Thread.CurrentThread.CurrentCulture = System.Globalization.CultureInfo.GetCultureInfo(language);

    if (Model != null && Model.Count() != 0)
    {
    <hr style="width: 30%; margin: 50px auto;" />

    <div class="row">
        <div class="col" style="text-align: center;">
            <p><label style="font-size: 1.5rem;">@Localizer["PrevAssessment"]</label></p>
            <i class="fa fa-long-arrow-left fa-3x" aria-hidden="true"></i>
                @if (Model.Where(i => i.AppointmentDate < DateTime.Now).Count() == 0)
                {
                    <p>
                        <label style="margin: 20px;">@Localizer["NoAssessment"]</label>
                    </p>
                }
                else
                {
                <ul style="margin-top: 10px;">
                    @foreach (var item in Model.Where(i => i.AppointmentDate < DateTime.Now))
                    {
                        @if (item.IsCancelled == true)
                        {
                    <li class="list-group-item" style="background-color: lightgoldenrodyellow;">
                        <span>CANCELLED</span>
                        <span>-</span> @Html.DisplayFor(modelItem => item.FunctionTitle)
                    </li>
                        }
                        else
                        {
                            <a style="text-decoration: none;" href="@Url.Action("GetProject", "Assessments", new { projectId = item.ProjectId })">
                                <li class="list-group-item pp">
                                    @Html.DisplayFor(modelItem => item.AppointmentDate)
                                    <span>-</span> @Html.DisplayFor(modelItem => item.FunctionTitle)
                                </li></a>
                        }
                    }
                </ul>
                }           
        </div>

        <div class="col" style="text-align: center;">
            <p><label style="font-size: 1.5rem;">@Localizer["FutAssessment"]</label></p>
            <i class="fa fa-long-arrow-right fa-3x" aria-hidden="true"></i>
            @if (Model.Where(i => i.AppointmentDate > DateTime.Now).Count() == 0)
            {
                <p>
                    <label style="margin: 20px;">@Localizer["NoAssessment"]</label>
                </p>
            }
            else
            {
                <ul style="margin-top: 10px;">
                    @foreach (var item in Model.Where(i => i.AppointmentDate > DateTime.Now))
                    {
                        <a style="text-decoration: none;" href="@Url.Action("GetProject", "Assessments", new { projectId = item.ProjectId })">
                            <li class="list-group-item pp">
                                @Html.DisplayFor(modelItem => item.AppointmentDate) <span>-</span> @Html.DisplayFor(modelItem => item.FunctionTitle) <br />
                            </li>
                        </a>
                    }
                </ul>
            }
        </div>
    </div>
    }
}